<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Add/Edit Nurse</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
}

body{
    font-family:'Poppins',sans-serif;
    background:#f4f6f9;
    min-height:100vh;
    padding:40px;
}

/* Full Width Container */
.form-container{
    width:100%;
    max-width:1200px;   /* Laptop lo wide ga untundi */
    margin:auto;
    background:#ffffff;
    padding:50px;
    border-radius:18px;
    box-shadow:0 15px 40px rgba(0,0,0,0.06);
}

/* Header */
.header-icon{
    font-size:40px;
    color:#198754;
}

h4{
    font-weight:600;
    color:#2c3e50;
}

/* Inputs */
.form-control,
.form-select{
    border-radius:8px;
    padding:10px 14px;
}

.form-control:focus,
.form-select:focus{
    box-shadow:none;
    border-color:#198754;
}

/* Time Box */
.time-box{
    background:#f8f9fa;
    border-left:4px solid #198754;
    border-radius:10px;
    padding:15px;
    margin-top:15px;
    display:none;
}

/* Buttons */
.btn-primary{
    background:#198754;
    border:none;
    border-radius:8px;
    padding:10px 25px;
}

.btn-primary:hover{
    background:#157347;
}

.btn-secondary{
    border-radius:8px;
    padding:10px 20px;
}

label{
    font-weight:500;
}

</style>
</head>

<body>

<div class="form-container">

<div class="text-center mb-5">
<i class="bi bi-person-badge-fill header-icon"></i>
<h4 class="mt-3" th:text="${nurse.id==null?'Add Nurse':'Edit Nurse'}"></h4>
<p class="text-muted">Hospital Staff Management System</p>
</div>

<form id="nurseForm" action="/nurses/save" method="post">

<input type="hidden" name="id" th:value="${nurse.id}">

<div class="row">

<div class="col-md-6 mb-4">
<label>Full Name</label>
<input name="name" class="form-control" th:value="${nurse.name}" required>
</div>

<div class="col-md-6 mb-4">
<label>Qualification</label>
<input name="qualification" class="form-control" th:value="${nurse.qualification}" required>
</div>

<div class="col-md-6 mb-4">
<label>Gender</label>
<select name="gender" class="form-select" required>
<option value="">Select</option>
<option th:selected="${nurse.gender=='Male'}" value="Male">Male</option>
<option th:selected="${nurse.gender=='Female'}" value="Female">Female</option>
</select>
</div>

<div class="col-md-6 mb-4">
<label>Shift</label>
<select name="shift" class="form-select" required>
<option value="">Select</option>
<option th:selected="${nurse.shift=='DAY'}" value="DAY">DAY</option>
<option th:selected="${nurse.shift=='NIGHT'}" value="NIGHT">NIGHT</option>
</select>
</div>

<div class="col-md-6 mb-4">
<label>Working Status</label>
<select name="status" class="form-select" id="statusSelect" required>
<option th:selected="${nurse.status=='WORKING'}" value="WORKING">WORKING</option>
<option th:selected="${nurse.status=='NOT_WORKING'}" value="NOT_WORKING">NOT WORKING</option>
</select>
</div>

</div>

<div class="time-box" id="timeBox">
<p><strong>Entry Time:</strong> <span id="entryTime" th:text="${nurse.entryTime}">-</span></p>
<p><strong>Exit Time:</strong> <span id="exitTime" th:text="${nurse.exitTime}">-</span></p>
</div>

<div class="d-flex justify-content-between mt-4">
<button type="submit" class="btn btn-primary">
<i class="bi bi-save me-1"></i> Save
</button>
<a th:href="@{/nurses}" class="btn btn-secondary">
<i class="bi bi-arrow-left me-1"></i> Back
</a>
</div>

</form>
</div>

<script>

const statusSelect = document.getElementById('statusSelect');
const timeBox = document.getElementById('timeBox');
const entryTimeSpan = document.getElementById('entryTime');
const exitTimeSpan = document.getElementById('exitTime');

if(entryTimeSpan.innerText.trim() || exitTimeSpan.innerText.trim()){
    timeBox.style.display='block';
}

document.getElementById('nurseForm').addEventListener('submit', function(e){
    const status = statusSelect.value;
    if(!status){
        e.preventDefault();
        Swal.fire({ icon:'error', title:'Missing Info', text:'Please select working status' });
        return;
    }
    let msg = status==='WORKING'
        ? 'Nurse duty started. Entry time recorded.'
        : 'Nurse duty ended. Exit time recorded.';
    Swal.fire({ icon:'success', title:'Saved Successfully', text:msg, timer:1500, showConfirmButton:false });
});

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>

